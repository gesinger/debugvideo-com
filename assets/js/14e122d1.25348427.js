"use strict";(self.webpackChunkdebug_video=self.webpackChunkdebug_video||[]).push([[903],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return u}});var o=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=o.createContext({}),d=function(e){var t=o.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},c=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),h=d(r),u=n,f=h["".concat(l,".").concat(u)]||h[u]||p[u]||a;return r?o.createElement(f,s(s({ref:t},c),{},{components:r})):o.createElement(f,s({ref:t},c))}));function u(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,s=new Array(a);s[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,s[1]=i;for(var d=2;d<a;d++)s[d]=r[d];return o.createElement.apply(null,s)}return o.createElement.apply(null,r)}h.displayName="MDXCreateElement"},700:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return i},contentTitle:function(){return l},metadata:function(){return d},toc:function(){return c},default:function(){return h}});var o=r(7462),n=r(3366),a=(r(7294),r(3905)),s=["components"],i={},l="Console",d={unversionedId:"devtools-console",id:"devtools-console",title:"Console",description:"The first devtools destination is the console.",source:"@site/docs/devtools-console.md",sourceDirName:".",slug:"/devtools-console",permalink:"/devtools-console",tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"Browser developer tools",permalink:"/browser-devtools"},next:{title:"Network",permalink:"/devtools-network"}},c=[{value:"Network",id:"network",children:[],level:2},{value:"The Video Player",id:"the-video-player",children:[],level:2},{value:"The Browser",id:"the-browser",children:[{value:"MEDIA_ERR_ABORTED and MEDIA_ERR_NETWORK",id:"media_err_aborted-and-media_err_network",children:[],level:4},{value:"MEDIA_ERR_DECODE",id:"media_err_decode",children:[],level:4},{value:"MEDIA_ERR_SRC_NOT_SUPPORTED",id:"media_err_src_not_supported",children:[],level:4},{value:"DRM/EME specific errors",id:"drmeme-specific-errors",children:[],level:4}],level:2}],p={toc:c};function h(e){var t=e.components,i=(0,n.Z)(e,s);return(0,a.kt)("wrapper",(0,o.Z)({},p,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"console"},"Console"),(0,a.kt)("p",null,"The first devtools destination is the console."),(0,a.kt)("p",null,"The console contains thrown errors and useful logs when an identifiable problem has occurred. A good portion of any problems, video or not, can be solved by carefully reading messages logged in the console. If there's a stack trace with links to code line numbers, follow those. If there's a long log message, read it thoroughly."),(0,a.kt)("p",null,"Although many errors are self explanatory, it's often helpful to know the source of the error logs. There are three possible layers where those logs may be coming from: network, the video player, or the browser."),(0,a.kt)("h2",{id:"network"},"Network"),(0,a.kt)("p",null,"Network requests can be logged in the console when the option is set."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Image of setting to log network requests",src:r(7299).Z})),(0,a.kt)("p",null,"Often the video player will trigger an error on its own when it encounters a 400 or 500 level HTTP status code. Regardless of where it comes from, if you see network request errors logged in the console, and it's for one of the media requests (manifests with HLS or DASH extensions, often .m3u8 and .mpd respectively, or media requests, e.g., .mp4, .ts, and .m4f), then media requests are a good place to start looking for the cause of the issue."),(0,a.kt)("h2",{id:"the-video-player"},"The Video Player"),(0,a.kt)("p",null,"This guide won't discuss player logs, because they're often specific to the player. Each has its own approach to logging. What's important is that if the player has a debug mode or offers different log levels, use all of those as primary means of debugging. Each log was written for a reason, and will contain helpful information in solving a problem."),(0,a.kt)("h2",{id:"the-browser"},"The Browser"),(0,a.kt)("p",null,"Technically, the browser can be any of the media engine code written for the browser (e.g., the decoder, renderer, EME handler, etc.), but the errors are standardized. The errors often don't reveal much without further research, so here are some common ones and some of the possible reasons that they might be thrown."),(0,a.kt)("p",null,"The HTML living standard provides a list of media error codes, with short descriptions. These may be found at: ",(0,a.kt)("a",{parentName:"p",href:"https://html.spec.whatwg.org/multipage/media.html#error-codes"},"https://html.spec.whatwg.org/multipage/media.html#error-codes")),(0,a.kt)("h4",{id:"media_err_aborted-and-media_err_network"},"MEDIA","_","ERR","_","ABORTED and MEDIA","_","ERR","_","NETWORK"),(0,a.kt)("p",null,"These errors are relatively straightforward, and their causes are often apparent in the ",(0,a.kt)("a",{parentName:"p",href:"devtools-network"},"network panel"),"."),(0,a.kt)("h4",{id:"media_err_decode"},"MEDIA","_","ERR","_","DECODE"),(0,a.kt)("p",null,"MEDIA","_","ERR","_","DECODE often occurs after playback has successfully been going for some time. Usually it's due to the content being malformed, or encoded in a way that the browser doesn't understand or expect."),(0,a.kt)("p",null,"Most of the time MEDIA","_","ERR","_","DECODE is a nightmare to figure out, as it encompasses a wide range of possible issues. This guide is largely inspired by it."),(0,a.kt)("p",null,"The best place to start is to check the ",(0,a.kt)("a",{parentName:"p",href:"devtools-media"},"media panel"),". After that, try to find the segment that's causing it (if a specific segment is causing it), then ",(0,a.kt)("a",{parentName:"p",href:"segment-issues#ffprobe"},"probe")," that segment and compare it with probes of the segments appended immediately before it."),(0,a.kt)("p",null,"If there are no useful messages and the downloaded segments appear valid, see if the video player is modifying the segments in any way before appending them (e.g., transmuxing) and if you can, verify the player's output. You can use the tools in ",(0,a.kt)("a",{parentName:"p",href:"segment-issues"},"segment issues")," to verify that the appended segments are valid and as expected. Also check that init segments are appended when needed, and that none of the data was corrupted or changed in a way that broke the format/codec."),(0,a.kt)("h4",{id:"media_err_src_not_supported"},"MEDIA","_","ERR","_","SRC","_","NOT","_","SUPPORTED"),(0,a.kt)("p",null,"Whether or not you're using ",(0,a.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/media-source/"},"MSE"),", this error indicates one of three issues: a player dependent error (a player may trigger this error itself), the browser doesn't support the provided source(s), or the source doesn't match specified media format type."),(0,a.kt)("p",null,"For an example of the player throwing the error, ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/videojs/http-streaming"},"VHS"),", a playback engine for ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/videojs/video.js"},"Video.js"),", will throw this error if the manifest is unreachable:\n",(0,a.kt)("img",{alt:"Image of 404 for manifest request",src:r(8019).Z})),(0,a.kt)("p",null,"In the console:\n",(0,a.kt)("img",{alt:"Image of console error",src:r(6184).Z})),(0,a.kt)("p",null,"If you're not using MSE, check the ",(0,a.kt)("inlineCode",{parentName:"p"},"<source>")," tag to verify that the ",(0,a.kt)("inlineCode",{parentName:"p"},"src")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"type")," are as expected."),(0,a.kt)("p",null,"If you're using MSE, check the ",(0,a.kt)("inlineCode",{parentName:"p"},"mimeType")," used when calling ",(0,a.kt)("a",{parentName:"p",href:"https://www.w3.org/TR/media-source/#dom-mediasource-addsourcebuffer"},"addSourceBuffer")," and verify that it matches the mime type of the player's appends."),(0,a.kt)("p",null,"One common case of this error is when trying to simulate a mobile device using Chrome's device-mode devtools. See the ",(0,a.kt)("a",{parentName:"p",href:"https://developer.chrome.com/docs/devtools/device-mode/#limitations"},"limitations page")," for details, but content which may play on mobile devices may not always play on desktop browsers, even with the simulation enabled."),(0,a.kt)("p",null,"If you still see issues after performing all of those checks, use some of the strategies for ",(0,a.kt)("inlineCode",{parentName:"p"},"MEDIA_ERR_DECODE"),"."),(0,a.kt)("h4",{id:"drmeme-specific-errors"},"DRM/EME specific errors"),(0,a.kt)("p",null,"In addition to the standard media errors, if you're handling DRM content, then EME may have additional errors. Those are addressed further in the ",(0,a.kt)("a",{parentName:"p",href:"drm"},"DRM section"),"."))}h.isMDXComponent=!0},7299:function(e,t,r){t.Z=r.p+"assets/images/log-network-requests-589043d9fc480392beb9103d89d5e2db.png"},6184:function(e,t,r){t.Z=r.p+"assets/images/network-404-manifest-console-3e178a4151b391ffa39dba657ef7d817.png"},8019:function(e,t,r){t.Z=r.p+"assets/images/network-404-manifest-111ff45b6296a3cf2e5652f4bbad220e.png"}}]);