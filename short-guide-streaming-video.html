<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">A short guide to streaming video | Debug Video</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://debugvideo.com/short-guide-streaming-video"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="A short guide to streaming video | Debug Video"><meta data-react-helmet="true" name="description" content="There are already many great resources describing how streaming video works:"><meta data-react-helmet="true" property="og:description" content="There are already many great resources describing how streaming video works:"><link data-react-helmet="true" rel="icon" href="/img/logo.svg"><link data-react-helmet="true" rel="canonical" href="https://debugvideo.com/short-guide-streaming-video"><link data-react-helmet="true" rel="alternate" href="https://debugvideo.com/short-guide-streaming-video" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://debugvideo.com/short-guide-streaming-video" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.488c9a18.css">
<link rel="preload" href="/assets/js/runtime~main.f576574a.js" as="script">
<link rel="preload" href="/assets/js/main.5ce7ed76.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Debug Video Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="Debug Video Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Debug Video</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/gesinger/debug-video" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">What is this?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/who-is-this-for">Who is this for?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/what-will-i-be-able-to-do">What will I be able to do?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/how-is-this-guide-organized">How is this guide organized?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/short-guide-streaming-video">A short guide to streaming video</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/addressing-new-tickets">Adrressing new tickets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/what-if-you-cant-reproduce">What if you can&#x27;t reproduce?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/browser-devtools">Browser developer tools</a><button aria-label="Toggle the collapsible sidebar category &#x27;Browser developer tools&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devtools-console">Console</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devtools-network">Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/devtools-media">Media</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/stream-issues">Stream issues</a><button aria-label="Toggle the collapsible sidebar category &#x27;Stream issues&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/manifest-issues">Manifest</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/segment-issues">Segment</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/player-issues">Player issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/browser-issues">Browser issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/drm">DRM</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/charles-and-har-files">Other tools</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/charles-and-har-files">Charles Proxy and HAR files</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/exercises">Exercises</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>A short guide to streaming video</h1></header><p>There are already many great resources describing how streaming video works:</p><ul><li><a href="https://howvideo.works/" target="_blank" rel="noopener noreferrer">HowVideo.works</a></li><li><a href="https://github.com/leandromoreira/digital_video_introduction" target="_blank" rel="noopener noreferrer">Digital Video Introduction</a></li><li><a href="https://awesome.video/" target="_blank" rel="noopener noreferrer">awesome.video</a></li></ul><p>Because there are never enough, here&#x27;s a quick introduction that should cover most topics needed to understand this guide.</p><p>Note that some of the topics are greatly simplified. For more technical discussions, please refer to some of the other excellent resources above.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="video-files">Video Files<a class="hash-link" href="#video-files" title="Direct link to heading">â€‹</a></h2><p>A video file is a long stream of bits. There are two sections<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup>:</p><ol><li>Metadata - bits that describe the file</li><li>Video data - bits that are the actual content</li></ol><p><img alt="Image of video file metadata and video data" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c3R5bGU+CiAgICB0ZXh0IHsKICAgICAgZm9udDogYm9sZCAxMnB4IHNhbnMtc2VyaWY7CiAgICB9CiAgPC9zdHlsZT4KCiAgPHRleHQgeT0iMjUiIHg9IjMwMCI+VmlkZW8gRmlsZTwvdGV4dD4KICA8cGF0aCBkPSJNMSw0MCBMMSwzNSBMNjk5LDM1IEw2OTksNDAiIHN0cm9rZT0iYmxhY2siIGZpbGw9InRyYW5zcGFyZW50IiAvPgoKICA8cmVjdCB5PSI1MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9ImJsdWUiIC8+CiAgPHRleHQgeD0iMjAiIHk9IjEwMCIgZmlsbD0id2hpdGUiPk1ldGFkYXRhPC90ZXh0PgoKICA8cmVjdCB4PSIxMDAiIHk9IjUwIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0icmVkIiAvPgogIDx0ZXh0IHg9IjMwMCIgeT0iMTAwIiBmaWxsPSJ3aGl0ZSI+VmlkZW8gRGF0YTwvdGV4dD4KPC9zdmc+Cg=="></p><p>When you open a video file on your computer, the video player parses the file to read the metadata and all of the video data.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="why-use-streaming-video">Why use streaming video?<a class="hash-link" href="#why-use-streaming-video" title="Direct link to heading">â€‹</a></h2><p>To play a video file in a browser, you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video" target="_blank" rel="noopener noreferrer">HTML video element</a>.</p><div class="codeBlockContainer_J+bg language-html theme-code-block"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">video</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">some-video.mp4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">video/mp4</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">video</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The browser will download <code>some-video.mp4</code> and play it.</p><p>This leads to a few problems:</p><ol><li><strong>Wasted bandwidth</strong></li></ol><p>Let&#x27;s say a 1 minute MP4 file you have is over 100 MB. With an MP4 source in the <code>&lt;video&gt;</code> tag, the browser will try to download the entire video, whether you watch it all or not. If you pause the video, it will continue to buffer the entire MP4. This wastes bandwidth.</p><ol start="2"><li><strong>No support for live streams</strong></li></ol><p>With a single MP4 source, there&#x27;s no good way of handling live streams. If you try to continually append to an MP4, the browser is going to try to download the entire live stream, from the beginning to the end. For 24/7 live streams, this means that users will most likely never reach the most live portion of the stream. And if the browser did manage to catch up, as soon as it reached the current end of the MP4 the browser would stop downloading content.</p><ol start="3"><li><strong>No support for different renditions</strong></li></ol><p>In the case of <code>some-video.mp4</code> above, the content is 1080p. If a user is connected to 3G, they may not get to watch any of the video because the download is too slow. It would be better if they could download a 360p rendition instead.</p><ol start="4"><li><strong>No support for mixing content from different videos</strong></li></ol><p>If a stream provider wants to insert an ad into the middle of the stream, there&#x27;s no way to point to a different video in the middle of <code>some-video.mp4</code> without encoding the ad into <code>some-video.mp4</code>.</p><p>Streaming video aims to solve these issues by providing ways to:</p><ol><li>Cut a video file into smaller files.</li><li>Add new content for live streams.</li><li>Point to multiple renditions.</li><li>Mix content from different video files.</li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="how-does-streaming-video-work">How does streaming video work?<a class="hash-link" href="#how-does-streaming-video-work" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cutting-up-a-video-file">Cutting up a video file<a class="hash-link" href="#cutting-up-a-video-file" title="Direct link to heading">â€‹</a></h3><p>Here&#x27;s the image from earlier of <code>some-video.mp4</code>:</p><p><img alt="Image of video file metadata and video data" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c3R5bGU+CiAgICB0ZXh0IHsKICAgICAgZm9udDogYm9sZCAxMnB4IHNhbnMtc2VyaWY7CiAgICB9CiAgPC9zdHlsZT4KCiAgPHRleHQgeT0iMjUiIHg9IjMwMCI+VmlkZW8gRmlsZTwvdGV4dD4KICA8cGF0aCBkPSJNMSw0MCBMMSwzNSBMNjk5LDM1IEw2OTksNDAiIHN0cm9rZT0iYmxhY2siIGZpbGw9InRyYW5zcGFyZW50IiAvPgoKICA8cmVjdCB5PSI1MCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9ImJsdWUiIC8+CiAgPHRleHQgeD0iMjAiIHk9IjEwMCIgZmlsbD0id2hpdGUiPk1ldGFkYXRhPC90ZXh0PgoKICA8cmVjdCB4PSIxMDAiIHk9IjUwIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0icmVkIiAvPgogIDx0ZXh0IHg9IjMwMCIgeT0iMTAwIiBmaWxsPSJ3aGl0ZSI+VmlkZW8gRGF0YTwvdGV4dD4KPC9zdmc+Cg=="></p><p>The video file is divided into two sections: metadata and video data.</p><p>First, let&#x27;s cut out the metadata.</p><p><img alt="Image of video file metadata cut from video data" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c3R5bGU+CiAgICB0ZXh0IHsKICAgICAgZm9udDogYm9sZCAxMnB4IHNhbnMtc2VyaWY7CiAgICB9CiAgPC9zdHlsZT4KCiAgPHJlY3QgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9ImJsdWUiIC8+CiAgPHRleHQgeD0iMjAiIHk9IjUwIiBmaWxsPSJ3aGl0ZSI+TWV0YWRhdGE8L3RleHQ+CgogIDxyZWN0IHg9IjEyMCIgeT0iMCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9InJlZCIgLz4KICA8dGV4dCB4PSIzMDAiIHk9IjUwIiBmaWxsPSJ3aGl0ZSI+VmlkZW8gRGF0YTwvdGV4dD4KPC9zdmc+Cg=="></p><p>Next, let&#x27;s cut the video data into smaller portions (each portion being a file).</p><p><img alt="Image of segmented video file" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODQwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8c3R5bGU+CiAgICB0ZXh0IHsKICAgICAgZm9udDogYm9sZCAxMXB4IHNhbnMtc2VyaWY7CiAgICB9CiAgPC9zdHlsZT4KCiAgPHJlY3QgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9ImJsdWUiIC8+CiAgPHRleHQgeD0iMjAiIHk9IjUwIiBmaWxsPSJ3aGl0ZSI+TWV0YWRhdGE8L3RleHQ+CiAgPHRleHQgeD0iNSIgeT0iNzAiIGZpbGw9IndoaXRlIj5pbml0LXNlZ21lbnQubXA0PC90ZXh0PgoKICA8cmVjdCB4PSIxMjAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJyZWQiIC8+CiAgPHRleHQgeD0iMTMwIiB5PSI1MCIgZmlsbD0id2hpdGUiPnNlZ21lbnQwLm1wNDwvdGV4dD4KCiAgPHJlY3QgeD0iMjQwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0icmVkIiAvPgogIDx0ZXh0IHg9IjI1MCIgeT0iNTAiIGZpbGw9IndoaXRlIj5zZWdtZW50MS5tcDQ8L3RleHQ+CgogIDxyZWN0IHg9IjM2MCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9InJlZCIgLz4KICA8dGV4dCB4PSIzNzAiIHk9IjUwIiBmaWxsPSJ3aGl0ZSI+c2VnbWVudDIubXA0PC90ZXh0PgoKICA8cmVjdCB4PSI0ODAiIHk9IjAiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSJyZWQiIC8+CiAgPHRleHQgeD0iNDkwIiB5PSI1MCIgZmlsbD0id2hpdGUiPnNlZ21lbnQzLm1wNDwvdGV4dD4KCiAgPHJlY3QgeD0iNjAwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0icmVkIiAvPgogIDx0ZXh0IHg9IjYxMCIgeT0iNTAiIGZpbGw9IndoaXRlIj5zZWdtZW50NC5tcDQ8L3RleHQ+CgogIDxyZWN0IHg9IjcyMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9InJlZCIgLz4KICA8dGV4dCB4PSI3MzAiIHk9IjUwIiBmaWxsPSJ3aGl0ZSI+c2VnbWVudDUubXA0PC90ZXh0Pgo8L3N2Zz4K"></p><p>These portions are called segments, fragments, sections, or chunks. Different streaming protocols use different terms, but they&#x27;re all essentially the same thing. For this guide we&#x27;ll refer to them as segments.</p><p>The metadata segment is called an init (initialization) segment.</p><p>The data segments are called media segments, and are often referred to simply as segments.</p><p>Say each segment represents 10 seconds of video data. Now, if a user seeks to 30 seconds in the video, the first 3 segments can be skipped, and less bandwidth is used.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="requesting-portions-of-the-video">Requesting portions of the video<a class="hash-link" href="#requesting-portions-of-the-video" title="Direct link to heading">â€‹</a></h3><p>But how does the HTML <code>&lt;video&gt;</code> tag know about multiple segments and what portions of content they represent?</p><p>Here&#x27;s where streaming media protocols come in. The two most popular are HLS and DASH.</p><p>HLS starts with a .m3u8 file that has a series of lines, some with special tags. The specification is relatively small and easy to read. It can be found at <a href="https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-10" target="_blank" rel="noopener noreferrer">https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-10</a> </p><p>DASH starts with a .mpd file that is in XML format. The specification is large and can be found at <a href="https://standards.iso.org/ittf/PubliclyAvailableStandards/index.html" target="_blank" rel="noopener noreferrer">https://standards.iso.org/ittf/PubliclyAvailableStandards/index.html</a> (look for ISO/IEC 23009-1:2019 -  Information technology â€” Dynamic adaptive streaming over HTTP (DASH) â€” Part 1: Media presentation description and segment formats).</p><p>Whether using HLS or DASH, those files, the .m3u8 and .mpd files, are called manifests.</p><p>Because HLS manifests are often easier to read, let&#x27;s put the cut up video from before into an HLS Media Playlist called <code>media-1080.m3u8</code>:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-ENDLIST</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>EXT-X-MAP</code> tag points to the init segment (containing the metadata for the video) and then each of the video data segments follow, with their duration preceding their URLs.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Init Segments</h5></div><div class="admonition-content"><p>Note that you will not always see init segments. If they&#x27;re not included, it means that segments are &quot;self initializing,&quot; meaning they have the metadata included in the segment.</p></div></div><p><code>media-1080.m3u8</code> provides an easy way for a player to see how a video file is broken into segments. Now, instead of a player having to request an entire video file to play content starting from 30 seconds, it can skip over <code>segment0.mp4</code>, <code>segment1.mp4</code>, and <code>segment2.mp4</code> and start downloading from <code>segment3.mp4</code>.</p><p>For browser that suport HLS (.m3u8 files) and DASH (.mpd files) natively, you can drop them into a <code>&lt;video&gt;</code> tag and everything should work:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;video&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;source src=&quot;media-1080.m3u8&quot; type=&quot;application/x-mpegURL&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/video&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>By using a media playlist, we&#x27;ve (largely) solved the <strong>wasted bandwidth</strong> problem.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="live-streams">Live streams<a class="hash-link" href="#live-streams" title="Direct link to heading">â€‹</a></h3><p>But what about live streams? Well, the <code>#EXT-X-ENDLIST</code> tag at the end of <code>media-1080.m3u8</code> marks the stream as VOD (video on demand, meaning the entire video is known at start and has a fixed duration). If you remove the <code>#EXT-X-ENDLIST</code> tag from <code>media-1080.m3u8</code> then the stream becomes live. This means that the player will periodically re-request <code>media-1080.m3u8</code> from the server (in the case of <code>media-1080.m3u8</code>, about every 10 seconds), and check for new segments.</p><p>So if a user starts playing the stream and it shows:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MEDIA-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is the same <code>media-1080.m3u8</code> with the <code>EXT-X-ENDLIST</code> tag removed. </p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note on Media Sequence and Discontinuity Sequence</h5></div><div class="admonition-content"><p>You may have noticed that two extra tags were added:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MEDIA-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY-SEQUENCE:0</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>These will be discussed <a href="/manifest-issues#alternate-renditions-with-synchronization-issues">later in this guide</a>, but in short, these two numbers help maintain sync between different renditions and manifest refreshes.</p></div></div><p>Ten seconds later, the player requests <code>media-1080.m3u8</code> and it shows:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MEDIA-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment6.mp4</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>segment6.mp4</code> was added and represents 10 seconds of new content. That&#x27;s it. Live streams are supported.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="different-renditions">Different renditions<a class="hash-link" href="#different-renditions" title="Direct link to heading">â€‹</a></h3><p><code>media-1080.m3u8</code> provides a way for us to save bandwidth by seeking in a video without downloading the entire stream. It also allows us to add content to make a live stream. But it&#x27;s still only one rendition, 1080p. </p><p>If a user is watching a video on their phone, walks out of the house, lost WIFI, and is now on 3G, we still want playback to continue. If 3G can&#x27;t support a 1080p rendition then the player should switch to a 360p rendition without any playback interruption.</p><p>We need a 360p video file split into segments, and a <code>media-360.m3u8</code> manifest:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-ENDLIST</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Note that the manifest looks exactly the same as <code>media-1080.m3u8</code>, the key is it exists at a different URL. If <code>media-1080.m3u8</code> exists at <a href="http://example.com/media-1080.m3u8" target="_blank" rel="noopener noreferrer">http://example.com/media-1080.m3u8</a>, then <code>media-360.m3u8</code> may exist at <a href="http://example.com/media-360.m3u8" target="_blank" rel="noopener noreferrer">http://example.com/media-360.m3u8</a>. But how does the <code>&lt;video&gt;</code> tag know about this other rendition?</p><p>DASH uses one manifest for a stream, and will list all renditions in a single .mpd file. HLS uses one manifest to list renditions, and different manifests for each rendition. In the HLS spec the manifest which lists other manifests is referred to as a &quot;multivariant playlist,&quot; where variant is another term for rendition. In the community you may often hear the term &quot;main manifest&quot; to mean a multivariant playlist. The rendition manifests are referred to in the spec as &quot;media playlists.&quot; This sounds complicated, but let&#x27;s write a multivariant playlist and put it on our server as <a href="http://example.com/multivariant.m3u8" target="_blank" rel="noopener noreferrer">http://example.com/multivariant.m3u8</a>:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-STREAM-INF:BANDWIDTH=1280000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://example.com/media-360.m3u8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-STREAM-INF:BANDWIDTH=2560000,AVERAGE-BANDWIDTH=2000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http://example.com/media-1080.m3u8</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now, when setting up the <code>&lt;video&gt;</code> tag, instead of pointing to <code>media-1080.m3u8</code>, point to <code>multivariant.m3u8</code>:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;video&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;source src=&quot;http://example.com/multivariant.m3u8&quot; type=&quot;application/x-mpegURL&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/video&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now, if the player sees changes in the user&#x27;s bandwidth, it can switch between <code>media-360</code> and <code>media-1080.m3u8</code>.</p><p>With multiple renditions supported, the only thing left is to handle mixing content from different videos.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mixing-content">Mixing Content<a class="hash-link" href="#mixing-content" title="Direct link to heading">â€‹</a></h3><p>Let&#x27;s say you&#x27;re running a 24/7 live stream, and every 30 seconds you want to run the same 10 second ad. To do this, you need to somehow insert that ad into the media playlst. But you have a problem. Video files have timestamps, so, looking at our sample live stream from above:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MEDIA-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We know that segment0.mp4 runs from times 0 seconds to 10 seconds, and segment1.mp4 runs from times 10 seconds to 20 seconds, and so on. Not only is it written in the manifest as such, but the media files themselves (segment0.mp4 and segment1.mp4) have times embedded into them. If you insert <code>ad-segment0.ts</code> after <code>segment2.ts</code> expecting it to play from time 30 seconds to 40 seconds in the stream, you&#x27;ll end up with a problem:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MEDIA-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ad-segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The problem is that <code>ad-segment0.mp4</code>&#x27;s media times will report 0 seconds to 10 seconds, the same as <code>segment0.mp4</code>, so the ad segment will overwrite <code>segment0.ts</code>&#x27;s content in the buffer, and won&#x27;t play at the time expected.</p><p>Streaming media provides a way for us to insert content from different sources, with different timing, into the same stream. In HLS it&#x27;s called a &quot;discontinuity&quot; (since the content is discontinuous). In DASH you&#x27;ll see the same feature as different &quot;Periods.&quot;</p><p>What these discontinuities do is tell the player that the content is from a different source, and the times in the segments should be adjusted. To insert <code>ad-segment0.mp4</code> into the stream in a way that will position the ad starting at time 30 seconds, the manifest should be modified to:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#EXTM3U</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-TARGETDURATION:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-VERSION:3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MEDIA-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY-SEQUENCE:0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment1.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment2.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;ad-init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ad-segment0.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-DISCONTINUITY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXT-X-MAP:URI=&quot;init-segment.mp4&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment3.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment4.mp4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#EXTINF:10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">segment5.mp4</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>When the player reaches an <code>EXT-X-DISCONTINUITY</code> tag, it knows to adjust the times of the following segments so that the content follows what came before in the manifest. This timestamp adjustment is called a &quot;timestamp offset.&quot; In this case, ad-segment0.mp4, which has a media start time of 0 seconds, will be adjusted by 30 seconds, so all timestamps in the segment will have 30 seconds added to them.</p><p>Note also that different content will generally have different metadata, so <code>EXT-X-MAP</code> tags for the init segments are required before discontinuous content.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="video-tag-and-media-source-extensions">Video Tag and Media Source Extensions<a class="hash-link" href="#video-tag-and-media-source-extensions" title="Direct link to heading">â€‹</a></h2><p>For the examples above, we&#x27;ve put HLS sources directly into <code>&lt;video&gt;</code> tags, e.g.:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;video&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;source src=&quot;http://example.com/multivariant.m3u8&quot; type=&quot;application/x-mpegURL&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/video&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Some browsers support this (e.g., Safari natively supports HLS). But what if the browser doesn&#x27;t support that type (in this case HLS)?</p><p>Here&#x27;s where MSE (<a href="https://www.w3.org/TR/media-source/" target="_blank" rel="noopener noreferrer">Media Source Extensions</a>) becomes a great tool. MSE provides a way for developers to append segments of video to a <code>&lt;video&gt;</code> tag instead of providing a <code>&lt;source&gt;</code> directly.</p><p>Browser-based video players generally use the MSE APIs to handle source types that the browser doesn&#x27;t natively support. For instance, since Chrome doesn&#x27;t natively support HLS, the following are a few players you can use to support playback of HLS in Chrome:</p><ul><li><a href="https://github.com/videojs/video.js" target="_blank" rel="noopener noreferrer">Video.js</a></li><li><a href="https://github.com/video-dev/hls.js" target="_blank" rel="noopener noreferrer">hls.js</a></li><li><a href="https://github.com/google/shaka-player" target="_blank" rel="noopener noreferrer">Shaka Player</a></li></ul><p>To use MSE, the player will create one <a href="https://www.w3.org/TR/media-source/#mediasource" target="_blank" rel="noopener noreferrer">MediaSource object</a>, which you can read as a source of media data, and use that as the source of the <code>&lt;video&gt;</code> element:</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> mediaSource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">MediaSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// videoElement is the &lt;video&gt; tag object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> videoElement</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">src</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">URL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createObjectURL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mediaSource</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Once the mediaSource object is ready, <a href="https://www.w3.org/TR/media-source/#sourcebuffer" target="_blank" rel="noopener noreferrer">SourceBuffer objects</a> can be added:</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> audioBuffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mediaSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addSourceBuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;audio/mp4; codecs=&quot;mp4a.40.2&quot;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> videoBuffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mediaSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addSourceBuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;video/mp4; codecs=&quot;avc1.4d400d&quot;&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now that audio and video buffers have been created, MP4 segments can be appended to them:</p><div class="codeBlockContainer_J+bg language-javascript theme-code-block"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Here segmentData is an ArrayBuffer of an MP4 segment, say segment0.mp4 from the examples</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">videoBuffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">appendBuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">segmentData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The APIs are a bit more involved, but those are the basics. Once an append of <code>segment0.mp4</code> completes, the <code>&lt;video&gt;</code> element will have 10 seconds of buffered content (from 0 seconds to 10 seconds).</p><p>Note that different browsers support different MIME types. If the browser doesn&#x27;t support the MIME type when creating the buffer, a <a href="https://webidl.spec.whatwg.org/#notsupportederror" target="_blank" rel="noopener noreferrer">NotSupportedError</a> will be thrown.</p><p>Note also that different container formats are supported by different browsers.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="container-formats">Container Formats<a class="hash-link" href="#container-formats" title="Direct link to heading">â€‹</a></h2><p>For the guide thus far, we&#x27;ve been using MP4 files. But there are also other file types. The most common you will see in streaming media are MP4 and TS.</p><p><a href="https://en.wikipedia.org/wiki/Container_format_(computing)" target="_blank" rel="noopener noreferrer">Container formats</a> provide a way of wrapping media data with metadata into a single file. In the examples above, we split a video file into metadata and video data. But what if there&#x27;s also audio data? And what if there are captions too? Container formats provide well defined ways of combining different streams together, and describing them (via metadata), to make the files easy for players (and us) to read and understand.</p><p>For more detailed discussions of container formats, please see some of the links to at the top of this page, but for a very quick introduction to the primary ones, MP4 and TS, here&#x27;s a very high level overview of what they are.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mp4">MP4<a class="hash-link" href="#mp4" title="Direct link to heading">â€‹</a></h3><p>MP4 files are very easy to read. They&#x27;re composed of a sequential list of boxes (which used to be called atoms). Each box has 3 sections: 4 bytes describing the length of the box (in bytes), 4 bytes describing the type of box, then the box contents. For browser-based media streaming, you can refer to the <a href="https://www.w3.org/TR/mse-byte-stream-format-isobmff/" target="_blank" rel="noopener noreferrer">ISO BMFF MSE bytestream format specification</a> for a listing of the boxes that MSE expects, and the ISO BMFF specification (ISO/IEC 14996-12), for the box definitions.</p><p>If you run <a href="/segment-issues#xxd">xxd</a> or <a href="/segment-issues#xxd">mp4dump</a> on an MP4 segment, you can see the boxes listed.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ts">TS<a class="hash-link" href="#ts" title="Direct link to heading">â€‹</a></h3><p>TS files are a sequential series of 188 byte &quot;sections,&quot; where each section starts with a &quot;sync byte&quot; (ASCII character &#x27;G&#x27;) followed by metadata information and the media data. The bitstream specification for a packet can be found at the <a href="https://en.wikipedia.org/wiki/MPEG_transport_stream#Packet" target="_blank" rel="noopener noreferrer">wiki article</a>.</p><p>If you run <a href="/segment-issues#xxd">xxd</a> on a TS segment, you can see the sync bytes representing the packets (every 188 bytes).</p><div class="footnotes"><hr><ol><li id="fn-1">Note that metadata may also be found in more places than just the beginning of the video file. To keep things simple, we&#x27;ll only discuss metadata at the beginning.<a href="#fnref-1" class="footnote-backref">â†©</a></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/how-is-this-guide-organized"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How is this guide organized?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/addressing-new-tickets"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adressing new tickets</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#video-files" class="table-of-contents__link toc-highlight">Video Files</a></li><li><a href="#why-use-streaming-video" class="table-of-contents__link toc-highlight">Why use streaming video?</a></li><li><a href="#how-does-streaming-video-work" class="table-of-contents__link toc-highlight">How does streaming video work?</a><ul><li><a href="#cutting-up-a-video-file" class="table-of-contents__link toc-highlight">Cutting up a video file</a></li><li><a href="#requesting-portions-of-the-video" class="table-of-contents__link toc-highlight">Requesting portions of the video</a></li><li><a href="#live-streams" class="table-of-contents__link toc-highlight">Live streams</a></li><li><a href="#different-renditions" class="table-of-contents__link toc-highlight">Different renditions</a></li><li><a href="#mixing-content" class="table-of-contents__link toc-highlight">Mixing Content</a></li></ul></li><li><a href="#video-tag-and-media-source-extensions" class="table-of-contents__link toc-highlight">Video Tag and Media Source Extensions</a></li><li><a href="#container-formats" class="table-of-contents__link toc-highlight">Container Formats</a><ul><li><a href="#mp4" class="table-of-contents__link toc-highlight">MP4</a></li><li><a href="#ts" class="table-of-contents__link toc-highlight">TS</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.f576574a.js"></script>
<script src="/assets/js/main.5ce7ed76.js"></script>
</body>
</html>